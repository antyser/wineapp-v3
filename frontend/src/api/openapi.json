{"openapi":"3.1.0","info":{"title":"Wine App API","description":"API for the Wine App","version":"0.1.0"},"paths":{"/api/v1/wines/":{"get":{"tags":["wines"],"summary":"Get All Wines","operationId":"get_all_wines_api_v1_wines__get","parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"}},{"name":"region","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"}},{"name":"country","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"}},{"name":"varietal","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Varietal"}},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"}},{"name":"min_price","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Price"}},{"name":"max_price","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Price"}},{"name":"min_rating","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Rating"}},{"name":"min_vintage","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Vintage"}},{"name":"max_vintage","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Vintage"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedWineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["wines"],"summary":"Create New Wine","operationId":"create_new_wine_api_v1_wines__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WineCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Wine"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/wines/my-wines":{"get":{"tags":["wines"],"summary":"Search Current User Wines","description":"Search for wines within the current authenticated user's interacted items\n(cellar, notes, wishlist).\n\nReturns enriched wine data with user interaction information.\n\nAllows filtering by name, type, country, region, winery, grape,\nand supports pagination and sorting.","operationId":"search_current_user_wines_api_v1_wines_my_wines_get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"}},{"name":"wine_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Type"}},{"name":"country","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"}},{"name":"grape_variety","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Grape Variety"}},{"name":"region","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"}},{"name":"winery","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winery"}},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"name","title":"Sort By"}},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","pattern":"^(asc|desc)$","default":"asc","title":"Sort Order"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedEnrichedWineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/wines/{wine_id}":{"get":{"tags":["wines"],"summary":"Get One Wine","operationId":"get_one_wine_api_v1_wines__wine_id__get","parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Wine"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["wines"],"summary":"Update Existing Wine","operationId":"update_existing_wine_api_v1_wines__wine_id__patch","parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WineUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Wine"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["wines"],"summary":"Delete Existing Wine","operationId":"delete_existing_wine_api_v1_wines__wine_id__delete","parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/wines/user/{wine_id}":{"get":{"tags":["wines"],"summary":"Get Wine For User","description":"Get comprehensive wine information for the current user, including:\n1. Basic wine information\n2. User's interaction with the wine (likes, wishlist, rating, etc.)\n3. User's notes about the wine\n4. User's cellar information for this wine (bottles in their cellars)\n\nThe wine's image will be replaced with the user's scan image if available.","operationId":"get_wine_for_user_api_v1_wines_user__wine_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cellars":{"get":{"tags":["cellars"],"summary":"List Cellars","description":"List cellars with optional filtering","operationId":"list_cellars_api_v1_cellars_get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by user ID","title":"User Id"},"description":"Filter by user ID"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of results to return","default":20,"title":"Limit"},"description":"Maximum number of results to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of results to skip","default":0,"title":"Offset"},"description":"Number of results to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarListResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["cellars"],"summary":"Create Cellar","description":"Create a new cellar","operationId":"create_cellar_api_v1_cellars_post","security":[{"SupabaseAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cellar"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cellars/{cellar_id}":{"get":{"tags":["cellars"],"summary":"Get Cellar","description":"Get a cellar by ID","operationId":"get_cellar_api_v1_cellars__cellar_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar to retrieve","title":"Cellar Id"},"description":"The ID of the cellar to retrieve"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cellar"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["cellars"],"summary":"Update Cellar","description":"Update a cellar","operationId":"update_cellar_api_v1_cellars__cellar_id__patch","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar to update","title":"Cellar Id"},"description":"The ID of the cellar to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cellar"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["cellars"],"summary":"Delete Cellar","description":"Delete a cellar","operationId":"delete_cellar_api_v1_cellars__cellar_id__delete","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar to delete","title":"Cellar Id"},"description":"The ID of the cellar to delete"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cellars/{cellar_id}/wines":{"get":{"tags":["cellars"],"summary":"List Cellar Wines","description":"List wines in a cellar with optional filtering","operationId":"list_cellar_wines_api_v1_cellars__cellar_id__wines_get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar","title":"Cellar Id"},"description":"The ID of the cellar"},{"name":"section","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by cellar section","title":"Section"},"description":"Filter by cellar section"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (e.g. in_stock, consumed)","title":"Status"},"description":"Filter by status (e.g. in_stock, consumed)"},{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search query for wine name, winery, etc.","title":"Query"},"description":"Search query for wine name, winery, etc."},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Field to sort by","default":"created_at","title":"Sort By"},"description":"Field to sort by"},{"name":"sort_desc","in":"query","required":false,"schema":{"type":"boolean","description":"Sort direction (true for descending)","default":true,"title":"Sort Desc"},"description":"Sort direction (true for descending)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of results to return","default":20,"title":"Limit"},"description":"Maximum number of results to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of results to skip","default":0,"title":"Offset"},"description":"Number of results to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarWineListResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cellars/{cellar_id}/statistics":{"get":{"tags":["cellars"],"summary":"Get Cellar Statistics","description":"Get statistics for a cellar","operationId":"get_cellar_statistics_api_v1_cellars__cellar_id__statistics_get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar","title":"Cellar Id"},"description":"The ID of the cellar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarStatistics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cellars/wines/{cellar_wine_id}":{"get":{"tags":["cellars"],"summary":"Get Cellar Wine","description":"Get a specific wine in a cellar","operationId":"get_cellar_wine_api_v1_cellars_wines__cellar_wine_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar wine to retrieve","title":"Cellar Wine Id"},"description":"The ID of the cellar wine to retrieve"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarWineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["cellars"],"summary":"Update Cellar Wine","description":"Update a wine in a cellar","operationId":"update_cellar_wine_api_v1_cellars_wines__cellar_wine_id__patch","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar wine to update","title":"Cellar Wine Id"},"description":"The ID of the cellar wine to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarWineUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarWineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["cellars"],"summary":"Remove Wine From Cellar","description":"Remove a wine from a cellar","operationId":"remove_wine_from_cellar_api_v1_cellars_wines__cellar_wine_id__delete","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"cellar_wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the cellar wine to remove","title":"Cellar Wine Id"},"description":"The ID of the cellar wine to remove"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/cellars/wines":{"post":{"tags":["cellars"],"summary":"Add Wine To Cellar","description":"Add a wine to a cellar","operationId":"add_wine_to_cellar_api_v1_cellars_wines_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarWineCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellarWineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"SupabaseAuth":[]}]}},"/api/v1/search":{"post":{"tags":["search"],"summary":"Search Wines Endpoint","description":"Search for wines using text input or a Supabase image URL.\nRecords the search attempt in the user's history.\n\nArgs:\n    user_id: UUID of the current user (from auth token)\n    search_data: JSON request body with text_input and/or image_url\n\nReturns:\n    List of found wines","operationId":"search_wines_endpoint_api_v1_search_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/SearchRequest"},{"type":"null"}],"title":"Search Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Wine"},"type":"array","title":"Response Search Wines Endpoint Api V1 Search Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/search/history":{"get":{"tags":["search"],"summary":"Get User Search History","description":"Get the current user's search history with enriched wine information.\n\nArgs:\n    user_id: UUID of the current user (from auth token)\n    limit: Maximum number of records to return\n    offset: Number of records to skip\n\nReturns:\n    SearchHistoryResponse with items and metadata","operationId":"get_user_search_history_api_v1_search_history_get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notes/":{"post":{"tags":["notes"],"summary":"Create Note","description":"Create a new note","operationId":"create_note_api_v1_notes__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoteCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Note"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"SupabaseAuth":[]}]}},"/api/v1/notes/user/{user_id}":{"get":{"tags":["notes"],"summary":"Get Notes By User","description":"Get all notes for a user","operationId":"get_notes_by_user_api_v1_notes_user__user_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Notes By User Api V1 Notes User  User Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notes/wine/{wine_id}":{"get":{"tags":["notes"],"summary":"Get Notes By Wine","description":"Get a user's notes for a specific wine","operationId":"get_notes_by_wine_api_v1_notes_wine__wine_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Note"},"title":"Response Get Notes By Wine Api V1 Notes Wine  Wine Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notes/{note_id}":{"get":{"tags":["notes"],"summary":"Get Note By Id","description":"Get a single note by its ID","operationId":"get_note_by_id_api_v1_notes__note_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"note_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"The ID of the note to retrieve","title":"Note Id"},"description":"The ID of the note to retrieve"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Note"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["notes"],"summary":"Update Note","description":"Update a note","operationId":"update_note_api_v1_notes__note_id__patch","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"note_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Note Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoteUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Note"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["notes"],"summary":"Delete Note","description":"Delete a note","operationId":"delete_note_api_v1_notes__note_id__delete","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"note_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Note Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Note Api V1 Notes  Note Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notes/upsert":{"post":{"tags":["notes"],"summary":"Upsert Note Endpoint","description":"Upsert a note for a wine (create if it doesn't exist or update if it exists)","operationId":"upsert_note_endpoint_api_v1_notes_upsert_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoteUpsertPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Note"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Not Found"},"422":{"description":"Validation Error"}},"security":[{"SupabaseAuth":[]}]}},"/api/v1/interactions/":{"post":{"tags":["interactions"],"summary":"Create Interaction","description":"Create a new interaction","operationId":"create_interaction_api_v1_interactions__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InteractionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Interaction Api V1 Interactions  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"SupabaseAuth":[]}]}},"/api/v1/interactions/{interaction_id}":{"get":{"tags":["interactions"],"summary":"Get Interaction","description":"Get an interaction by ID","operationId":"get_interaction_api_v1_interactions__interaction_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"interaction_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Interaction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Interaction Api V1 Interactions  Interaction Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["interactions"],"summary":"Update Interaction","description":"Update an interaction","operationId":"update_interaction_api_v1_interactions__interaction_id__patch","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"interaction_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Interaction Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InteractionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Interaction Api V1 Interactions  Interaction Id  Patch"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["interactions"],"summary":"Delete Interaction","description":"Delete an interaction","operationId":"delete_interaction_api_v1_interactions__interaction_id__delete","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"interaction_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Interaction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Interaction Api V1 Interactions  Interaction Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/interactions/user/{user_id}":{"get":{"tags":["interactions"],"summary":"Get Interactions By User","description":"Get all interactions for a user","operationId":"get_interactions_by_user_api_v1_interactions_user__user_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Interactions By User Api V1 Interactions User  User Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/interactions/wine/{wine_id}":{"get":{"tags":["interactions"],"summary":"Get Interaction By Wine","description":"Get a user's interaction with a specific wine","operationId":"get_interaction_by_wine_api_v1_interactions_wine__wine_id__get","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Interaction By Wine Api V1 Interactions Wine  Wine Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/interactions/wine/{wine_id}/toggle/{action}":{"post":{"tags":["interactions"],"summary":"Toggle Interaction","description":"Toggle an interaction property (liked, wishlist, tasted) for a wine\n\nArgs:\n    wine_id: ID of the wine\n    action: Property to toggle ('liked', 'wishlist', or 'tasted')\n\nReturns:\n    Updated interaction data","operationId":"toggle_interaction_api_v1_interactions_wine__wine_id__toggle__action__post","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}},{"name":"action","in":"path","required":true,"schema":{"type":"string","title":"Action"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Toggle Interaction Api V1 Interactions Wine  Wine Id  Toggle  Action  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/interactions/wine/{wine_id}/rate":{"post":{"tags":["interactions"],"summary":"Rate Wine","description":"Rate a wine (on scale of 1-5)\n\nArgs:\n    wine_id: ID of the wine\n    rating: Rating value (1-5, can be decimal)\n\nReturns:\n    Updated interaction data","operationId":"rate_wine_api_v1_interactions_wine__wine_id__rate_post","security":[{"SupabaseAuth":[]}],"parameters":[{"name":"wine_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Wine Id"}},{"name":"rating","in":"query","required":true,"schema":{"type":"number","title":"Rating"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Rate Wine Api V1 Interactions Wine  Wine Id  Rate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/wine":{"post":{"tags":["chat"],"summary":"Standard Wine Chat (Request/Response)","description":"Process a wine chat request and return the complete response at once.","operationId":"wine_chat_standard_api_v1_chat_wine_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/wine/stream":{"post":{"tags":["chat"],"summary":"Streaming Wine Chat","description":"Process a wine chat request and stream the response token by token using Server-Sent Events (SSE).","operationId":"wine_chat_stream_api_v1_chat_wine_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatStreamRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"delete":{"tags":["auth"],"summary":"Delete Current User Account","description":"Allows the currently authenticated user to delete their own account and associated data.","operationId":"delete_me_api_v1_auth_me_delete","responses":{"204":{"description":"Successful Response"},"404":{"description":"Not found"}},"security":[{"SupabaseAuth":[]}]}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["health"],"summary":"Health Check","description":"Health check endpoint to verify the API is running\nand the Supabase connection is working","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/test-supabase":{"get":{"summary":"Test Supabase","description":"Test endpoint to verify Supabase connection","operationId":"test_supabase_api_v1_test_supabase_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Cellar":{"properties":{"name":{"type":"string","title":"Name"},"sections":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sections"},"image_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Image Url"},"id":{"type":"string","title":"Id"},"user_id":{"type":"string","title":"User Id"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["name","id","user_id","created_at","updated_at"],"title":"Cellar","description":"Full cellar model with all fields"},"CellarCreate":{"properties":{"name":{"type":"string","title":"Name"},"sections":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sections"},"image_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Image Url"},"user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"}},"type":"object","required":["name"],"title":"CellarCreate","description":"Fields required to create a cellar"},"CellarListResult":{"properties":{"items":{"items":{"$ref":"#/components/schemas/Cellar"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"CellarListResult","description":"Result from listing cellars"},"CellarStatistics":{"properties":{"total_bottles":{"type":"integer","title":"Total Bottles"},"total_value":{"type":"number","title":"Total Value"},"bottles_by_type":{"additionalProperties":{"type":"integer"},"type":"object","title":"Bottles By Type"},"bottles_by_region":{"additionalProperties":{"type":"integer"},"type":"object","title":"Bottles By Region"},"bottles_by_vintage":{"additionalProperties":{"type":"integer"},"type":"object","title":"Bottles By Vintage"}},"type":"object","required":["total_bottles","total_value","bottles_by_type","bottles_by_region","bottles_by_vintage"],"title":"CellarStatistics","description":"Statistics for a cellar"},"CellarUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"sections":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sections"},"image_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Image Url"}},"type":"object","title":"CellarUpdate","description":"Fields that can be updated"},"CellarWine":{"properties":{"cellar_id":{"type":"string","title":"Cellar Id"},"wine_id":{"type":"string","title":"Wine Id"},"purchase_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Purchase Date"},"purchase_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Purchase Price"},"quantity":{"type":"integer","title":"Quantity","default":1},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size"},"section":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section"},"condition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Condition"},"status":{"type":"string","title":"Status","default":"in_stock"},"id":{"type":"string","title":"Id"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["cellar_id","wine_id","id","created_at","updated_at"],"title":"CellarWine","description":"Full cellar wine model with all fields"},"CellarWineCreate":{"properties":{"cellar_id":{"type":"string","format":"uuid","title":"Cellar Id"},"wine_id":{"type":"string","format":"uuid","title":"Wine Id"},"purchase_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Purchase Date"},"purchase_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Purchase Price"},"quantity":{"type":"integer","title":"Quantity","default":1},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size"},"section":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section"},"condition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Condition"},"status":{"type":"string","title":"Status","default":"in_stock"}},"type":"object","required":["cellar_id","wine_id"],"title":"CellarWineCreate","description":"Fields required to create a cellar wine"},"CellarWineListResult":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CellarWineResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"CellarWineListResult","description":"Result from listing cellar wines"},"CellarWineResponse":{"properties":{"cellar_id":{"type":"string","title":"Cellar Id"},"wine_id":{"type":"string","title":"Wine Id"},"purchase_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Purchase Date"},"purchase_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Purchase Price"},"quantity":{"type":"integer","title":"Quantity","default":1},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size"},"section":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section"},"condition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Condition"},"status":{"type":"string","title":"Status","default":"in_stock"},"id":{"type":"string","title":"Id"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"wine":{"additionalProperties":true,"type":"object","title":"Wine"}},"type":"object","required":["cellar_id","wine_id","id","created_at","updated_at","wine"],"title":"CellarWineResponse","description":"Cellar wine with embedded wine details"},"CellarWineUpdate":{"properties":{"purchase_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Purchase Date"},"purchase_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Purchase Price"},"quantity":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quantity"},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size"},"section":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section"},"condition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Condition"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"type":"object","title":"CellarWineUpdate","description":"Fields that can be updated for a cellar wine"},"ChatRequest":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/Message"},"type":"array","title":"Messages","description":"List of conversation messages"},"model":{"type":"string","title":"Model","description":"Model to use for the chat","default":"gemini-2.5-flash-preview-04-17"}},"type":"object","required":["messages"],"title":"ChatRequest","description":"Request body for the standard (non-streaming) chat API."},"ChatResponse":{"properties":{"response":{"$ref":"#/components/schemas/MessageContent","description":"AI assistant response"},"followup_questions":{"items":{"type":"string"},"type":"array","title":"Followup Questions","description":"Generated follow-up questions"}},"type":"object","required":["response"],"title":"ChatResponse","description":"Response for the standard (non-streaming) chat API."},"ChatStreamRequest":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/Message"},"type":"array","title":"Messages","description":"List of conversation messages"},"model":{"type":"string","title":"Model","description":"Model to use for the chat","default":"gemini-2.5-flash-preview-04-17"}},"type":"object","required":["messages"],"title":"ChatStreamRequest","description":"Request body for the streaming chat API."},"EnrichedUserWine":{"properties":{"name":{"type":"string","title":"Name"},"winery":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winery"},"vintage":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Vintage"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"varietal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Varietal"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"wine_searcher_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Url"},"average_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"name_alias":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Name Alias"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"wine_searcher_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Id"},"drinking_window":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Drinking Window"},"food_pairings":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Food Pairings"},"abv":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abv"},"tasting_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tasting Notes"},"winemaker_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winemaker Notes"},"professional_reviews":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Professional Reviews"},"id":{"type":"string","title":"Id"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"wishlist":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Wishlist","default":false},"latest_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Latest Note"},"latest_note_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Latest Note Date"},"last_interaction":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Interaction"}},"type":"object","required":["name","id","created_at","updated_at"],"title":"EnrichedUserWine","description":"Wine data enriched with user interaction information"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Interaction":{"properties":{"user_id":{"type":"string","title":"User Id"},"wine_id":{"type":"string","format":"uuid","title":"Wine Id"},"liked":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Liked","default":false},"wishlist":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Wishlist","default":false},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"tasted":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Tasted","default":false},"id":{"type":"string","title":"Id"}},"type":"object","required":["user_id","wine_id","id"],"title":"Interaction","description":"Interaction model with all fields"},"InteractionCreate":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id"},"wine_id":{"type":"string","format":"uuid","title":"Wine Id"},"liked":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Liked","default":false},"wishlist":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Wishlist","default":false},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"tasted":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Tasted","default":false}},"type":"object","required":["user_id","wine_id"],"title":"InteractionCreate","description":"Fields required to create a new interaction"},"InteractionUpdate":{"properties":{"liked":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Liked"},"wishlist":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Wishlist"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"tasted":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Tasted"}},"type":"object","title":"InteractionUpdate","description":"Fields that can be updated for an interaction"},"Message":{"properties":{"role":{"type":"string","enum":["user","assistant"],"title":"Role","description":"Role of the message sender"},"content":{"$ref":"#/components/schemas/MessageContent","description":"Content of the message"}},"type":"object","required":["role","content"],"title":"Message","description":"Chat message model."},"MessageContent":{"properties":{"text":{"type":"string","title":"Text","description":"The text content of the message"}},"type":"object","required":["text"],"title":"MessageContent","description":"Content of a chat message."},"Note":{"properties":{"user_id":{"type":"string","title":"User Id"},"wine_id":{"type":"string","format":"uuid","title":"Wine Id"},"tasting_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Tasting Date"},"note_text":{"type":"string","title":"Note Text"},"id":{"type":"string","title":"Id"}},"type":"object","required":["user_id","wine_id","note_text","id"],"title":"Note","description":"Note model with all fields"},"NoteCreate":{"properties":{"user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"},"wine_id":{"type":"string","format":"uuid","title":"Wine Id"},"tasting_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Tasting Date"},"note_text":{"type":"string","title":"Note Text"}},"type":"object","required":["wine_id","note_text"],"title":"NoteCreate","description":"Fields required to create a new note"},"NoteUpdate":{"properties":{"tasting_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Tasting Date"},"note_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note Text"}},"type":"object","title":"NoteUpdate","description":"Fields that can be updated for a note"},"NoteUpsertPayload":{"properties":{"wine_id":{"type":"string","format":"uuid","title":"Wine Id"},"tasting_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Tasting Date"},"note_text":{"type":"string","title":"Note Text"}},"type":"object","required":["wine_id","note_text"],"title":"NoteUpsertPayload","description":"Payload for upserting a note (create if not exists, update if exists)"},"PaginatedEnrichedWineResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/EnrichedUserWine"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"PaginatedEnrichedWineResponse"},"PaginatedWineResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/Wine"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"PaginatedWineResponse"},"SearchHistoryItemResponse":{"properties":{"search_type":{"$ref":"#/components/schemas/SearchType"},"search_query":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search Query"},"result_wine_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Result Wine Ids"},"id":{"type":"string","title":"Id"},"user_id":{"type":"string","title":"User Id"},"created_at":{"type":"string","title":"Created At"},"wines":{"anyOf":[{"items":{"$ref":"#/components/schemas/Wine"},"type":"array"},{"type":"null"}],"title":"Wines"}},"type":"object","required":["search_type","id","user_id","created_at"],"title":"SearchHistoryItemResponse","description":"Enhanced search history item with wine details"},"SearchHistoryResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SearchHistoryItemResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["items","total","limit","offset"],"title":"SearchHistoryResponse","description":"Response model for search history endpoint"},"SearchRequest":{"properties":{"text_input":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text Input"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"}},"type":"object","title":"SearchRequest"},"SearchType":{"type":"string","enum":["text","image"],"title":"SearchType","description":"Enum for search types"},"UserWineResponse":{"properties":{"wine":{"anyOf":[{"$ref":"#/components/schemas/Wine"},{"type":"null"}]},"interaction":{"anyOf":[{"$ref":"#/components/schemas/Interaction"},{"type":"null"}]},"notes":{"items":{"$ref":"#/components/schemas/Note"},"type":"array","title":"Notes"},"cellar_wines":{"anyOf":[{"items":{"$ref":"#/components/schemas/CellarWine"},"type":"array"},{"type":"null"}],"title":"Cellar Wines","default":[]},"offers":{"anyOf":[{"items":{"$ref":"#/components/schemas/WineSearcherOffer"},"type":"array"},{"type":"null"}],"title":"Offers","default":[]}},"type":"object","title":"UserWineResponse","description":"Response model for the user's comprehensive wine information"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"Wine":{"properties":{"name":{"type":"string","title":"Name"},"winery":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winery"},"vintage":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Vintage"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"varietal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Varietal"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"rating":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rating"},"wine_searcher_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Url"},"average_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"name_alias":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Name Alias"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"wine_searcher_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Id"},"drinking_window":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Drinking Window"},"food_pairings":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Food Pairings"},"abv":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abv"},"tasting_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tasting Notes"},"winemaker_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winemaker Notes"},"professional_reviews":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Professional Reviews"},"id":{"type":"string","title":"Id"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["name","id","created_at","updated_at"],"title":"Wine","description":"Full wine model with all fields"},"WineCreate":{"properties":{"name":{"type":"string","title":"Name"},"winery":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winery"},"vintage":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Vintage"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"varietal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Varietal"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"rating":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rating"},"wine_searcher_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Url"},"average_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"name_alias":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Name Alias"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"wine_searcher_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Id"},"drinking_window":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Drinking Window"},"food_pairings":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Food Pairings"},"abv":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abv"},"tasting_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tasting Notes"},"winemaker_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winemaker Notes"},"professional_reviews":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Professional Reviews"}},"type":"object","required":["name"],"title":"WineCreate","description":"Fields required to create a wine"},"WineSearcherOffer":{"properties":{"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"unit_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Unit Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"seller_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Seller Name"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"},"seller_address_region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Seller Address Region"},"seller_address_country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Seller Address Country"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},"type":"object","title":"WineSearcherOffer","description":"Offer from Wine-Searcher.com"},"WineUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"winery":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winery"},"vintage":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Vintage"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"varietal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Varietal"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"rating":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rating"},"tasting_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tasting Notes"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"wine_searcher_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Id"},"wine_searcher_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wine Searcher Url"},"average_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"drinking_window":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Drinking Window"},"food_pairings":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Food Pairings"},"abv":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abv"},"name_alias":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Name Alias"},"winemaker_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winemaker Notes"},"professional_reviews":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Professional Reviews"}},"type":"object","title":"WineUpdate","description":"Fields that can be updated"}},"securitySchemes":{"SupabaseAuth":{"type":"http","scheme":"bearer"}}}}